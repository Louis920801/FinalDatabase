<!doctype html>
<html lang="zh-tw" data-theme="emerald">
  <head style="height: 100%; width: 100%;">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/immersive-translate.css') }}">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/site.css') }}">

    <title>國立台北科技大學附屬診所</title>
  </head>
  <body style="height: 100%; width: 100%; overflow-x: hidden;">
    <div class="navbar mb-2 fixed w-full z-50 top-0 border-b bg-base-100 text-base-content ">
      <div class="px-2 mx-2 navbar-start">
          <span class="text-lg font-bold">
            <a href="/">國立台北科技大學附屬診所</a>
          </span>
      </div> 
      <div class="hidden px-2 mx-2 navbar-center lg:flex">
      </div> 
      <div class="navbar-end">
        <div class="dropdown dropdown-end">
          <div tabindex="0" class="m-1 btn btn-square btn-ghost lg:hidden">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-6 h-6 stroke-current">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
          </div> 
          <ul tabindex="0" class="p-2 shadow menu dropdown-content bg-base-100 rounded-box w-52">
            <li>
              <a href="{{ url_for('index') }}">返回主頁</a>
            </li>
            <li>
              <a href="{{ url_for('logout') }}">登出</a>
            </li> 
          </ul>
        </div>
      </div>
    </div>


    <div class="min-h-screen bg-base-100 p-16 lg:p-32">
      <h1 class="font-bold text-3xl pl-4"> Pick a table</h1>
      
      <div class="hero-content flex-col lg:flex-row gap-16">
        
        <div class="card flex-shrink-0 w-full lg:w-2/5 max-w-xl shadow-xl bg-base-100">
          <form class="card-body p-8" enctype="multipart/form-data" method="post">
            
            <div class="form-control mb-6"> <select name="table" class="select select-bordered w-full" required>
                <option value="" disabled {{ 'selected' if not table_name else '' }}>Pick a table</option>
                {% for t in tables %}
                  <option value="{{ t }}" {{ 'selected' if t == table_name else '' }}>{{ t }}</option>
                {% endfor %}
                {% if not tables %}
                  <option disabled>(no tables)</option>
                {% endif %}
              </select>
            </div>

            <div class="form-control">
              <div class="flex-row gap-2">
                <button name="pick" class="btn btn-primary mr-2" >Pick</button>
                <button name="describe" class="btn btn-primary btn-outline" >Describe</button>
              </div>
            </div>
          </form>
        </div>
        
        <div class="flex-col w-full lg:w-3/5"> 
        {% if table_description %}
        
        <h1 class="font-bold text-xl p-2">{{ table_name }} 結構描述</h1>
        <div class="table-container overflow-x-auto bg-white shadow-xl rounded-lg">
            <table class="table w-full">
                <thead>
                    <tr class="text-sm">
                        <th></th> <th>FIELD</th>
                        <th>TYPE</th>
                        <th>NULL</th>
                        <th>KEY</th>
                        <th>DEFAULT</th>
                        <th>EXTRA</th>
                    </tr>
                </thead>
                <tbody>
                    {% for row in table_description %}
                    <tr class="hover:bg-gray-50">
                        <td class="text-sm text-gray-500">{{ loop.index }}</td> 
                        <td>{{ row.Field }}</td>
                        <td>{{ row.Type }}</td>
                        <td>{{ row.Null }}</td>
                        <td>{{ row.Key }}</td>
                        <td>{{ row.Default }}</td>
                        <td>{{ row.Extra }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        {% else %}

        <h1 class="font-bold text-xl p-2">可用資料表</h1>
        <div class="data-display-box p-4 bg-white shadow-md rounded-lg">
            <h3 class="text-xl font-semibold mb-3">可用資料表 (Available Tables)</h3>
            <ul class="list-disc list-inside space-y-1 text-gray-700">
                {% for t in tables %}
                <li class="hover:text-success cursor-default">{{ t }}</li>
                {% endfor %}
                
                {% if not tables %}
                <li class="text-gray-500">(目前沒有可用的資料表)</li>
                {% endif %}
            </ul>
        </div>

        {% endif %}
        </div>
        
      </div>
      </div>

    <footer class="footer p-10 bg-base-200 text-base-content">
      <div>
        <h1 class="text-xl font-bold">國立台北科技大學附屬診所</h1>
        <p>北科大 醫電工程與感測器網路實驗室</p>
      </div> 
      <div>
        <span class="footer-title">所址： 10608臺北市大安區忠孝東路三段1號</span> 
        <p>總機： #2253</p> 
        <p>負責人： 蔡霆鋒</p> 
      </div> 
    
      <div>
        <span class="footer-title">前端工程師</span> 
        <p>114368062 范祥偉</p> 
        <p>114368063 蔡霆鋒</p> 
      </div>
      <div>
        <span class="footer-title">資料庫設計</span> 
        <p>114368062 范祥偉</p> 
        <p>114368063 蔡霆鋒</p> 
      </div>
    </footer>

  </body>
</html>